---
title: "Relationship Between Sustainability (SDI) and GDP per Capita"
author: "Karisa Kopecek, Theo S., Treasure Joyce & Brooke Wallasch"
format: 
  html:
    embed-resources: true
    code-tools: true
    toc: true
    html-table-processing: none
editor: source
execute: 
  error: true
  echo: true
  message: false
  warning: false
---

# 1. Introduction

## Hypothesis

**Countries with higher GDP will have higher sustainability scores. There is a positive correlation between country wealth and sustainability score of countries.**

We came up with this hypothesis based on news articles we have seen throughout various websites stating things like "How the rich are driving climate change**" (**<https://www.bbc.com/future/article/20211025-climate-how-to-make-the-rich-pay-for-their-carbon-emissions>) which often leads into more articles talking about whether the rich have a responsibility to pay for climate efforts (<https://www.globalcitizen.org/en/content/international-climate-finance-explainer/>). We eventually came across an article talking about how richer countries actually have a bigger gap in marine sustainability efforts compared to poorer countries (<https://www.earth.com/news/wealthy-nations-are-making-more-progress-toward-sustainable-development/>). Additionally, we found that some of the leading countries in sustainability efforts across governance, environmental and social companies include Denmark, Finland, Sweden and Norway which are all countries that are developed countries versus some of the lowest being Burkina Faso, Guinea, and Ethiopia which are developing nations (https://www.robeco.com/en-us/sustainable-investing/expertise/most-sustainable-countries-in-the-world). Overall, we were motivated to see whether richer countries do actually receive higher sustainability scores.

## Objectives

1.  Analyze the relationship between GDP and sustainability scores across different countries

2.  Evaluate Outliers in the data

3.  Ultimately asses whether sustainability outcomes are better or worse depending on a country's GDP

## Packages

```{r}
library(tidyverse)
library(knitr)
```

## Data

**Data pulled from GapMinder**

**Explanatory Variable: GDP per Capita (<http://gapm.io/dgdpcap_cppp>) from 1800-2022**

**Response Variable: Sustainable Development Index (<http://gapm.io/dsdi>) from 1990-2019**

*The original data for GDP per Capita came from:*

For 1990-2022, the series aligns with the World Bank’s GDP per capita data (<https://data.worldbank.org/indicator/NY.GDP.PCAP.PP.KD>), published in April 2024. Prior to 1990, data is drawn from the 2023 version of the Maddison Project Database (<https://www.rug.nl/ggdc/historicaldevelopment/maddison/releases/maddison-project-database-2023>), which offers historical GDP estimates for 169 countries. In rare cases where neither source provided data (typically between 1950-2019) Gapminder uses the Penn World Table (PWT) version 10.01 (<https://www.rug.nl/ggdc/productivity/pwt/>), which covers 183 countries. When none of the above sources are available, Gapminder falls back on its own historical estimates, primarily from GDP Per capita v26 and earlier versions (<https://www.gapminder.org/documentation/documentation/gapdoc001_v9.pdf>). Additionally, Gapminder has produced new estimates for countries experiencing crises, including Afghanistan, Belarus, Cuba, North Korea, and others (these data points may be less accurate). The various sources were combined and cleaned for GapMinder.

*The original data for Sustainable Development Index came from:*

<https://www.sustainabledevelopmentindex.org/methods> which is a research project focused on the ecological efficiency of nations in delivering human development. The data was somewhat cleaned/split into different categories and then posted to GapMinder.

```{r}
sustainability <- read_csv("sdi.csv")
#164 countries, 1990 - 2019

gdp <- read_csv("gdp_pcap.csv")
#195 countries, 1800 - 2100
```

# 2. Data Cleaning

```{r}
#pivot longer (each row identified by a country and a year)
sustainability.long <- sustainability |> 
  mutate(across(.cols = '1990':'2019', .fns = ~as.numeric(.x, na.rm = TRUE))) |> 
  pivot_longer(cols = '1990':'2019', 
               names_to = "year", 
               values_to = "sdi")

gdp_long <- gdp |> 
  mutate(across(.cols = '1800':'2100', .fns = ~as.numeric(.x, na.rm = TRUE))) |> 
  pivot_longer(cols = '1800':'2100', 
               names_to = "year", 
               values_to = "gdp")

#left_join and removing rows missing sdi or gdp
df.clean <- sustainability.long |> 
  left_join(gdp_long, join_by(country, year)) |> 
  filter(!if_any(.cols = sdi:gdp, .fns = ~is.na(.x)))

```

**Data cleaning process and decisions that may impact the analysis:**

I dropped rows missing sdi or gdp data, and these missing values likely occurred due to the SDI dataset covering only 1990–2019, whereas the GDP dataset spans 1800–2100. So, GDP values may exist for years where SDI data does not, and vice versa.

Also, data cleaning removing missing sdi or gdp data mainly affected small or politically unstable countries including: Angola, Antigua, Bhutan, Eritria, Lebanon, Nigeria, Serbia, Suriname, Turkmenistan, and Vanatu (Belarus, North Korea not included at all in the data).

\*The following is not included in this week's report, but we included it for future reference

# 3. Modeling and Relationship Between Sustainability (SDI) and GDP per capita

```{r}
#preliminary scatterplot
df.clean |> 
  group_by(country) |> 
  summarize(mean.sdi = mean(sdi), mean.gdp = mean(gdp)) |> 
  ggplot(aes(x = mean.gdp, y = mean.sdi))+
  geom_point()+
  geom_smooth(method = "lm")+
  theme_classic() +
  labs(x = "GDP per Capita (2017 dollars)", y = "", subtitle = "Sustainable Development Index (SDI)", title = "Relationship between GDP per capita and Sustainability (SDI) \n from 1990 to 2019")
  
```

# 4. Cross-Validation

```{r}

```

# 5. Conclusion

```{r}

```
